<!doctype html><html lang=en><meta charset=utf-8><title>A Right Set Up | nevstokes.com</title><link rel=preload as=font href=/fonts/quicksand-300-latin.woff2 type=font/woff2 crossorigin=anonymous><link rel=icon href=/favicon.svg><link rel=canonical href=https://nevstokes.com/blog/2020-07-04-a-right-set-up/><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/syntax.css><meta name=description content="Personal site"><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1,user-scalable=yes,viewport-fit=cover"><a href=#content>Skip to main content</a><main><header><a href=/>nevstokes.com</a><nav><a title=Blog href=/blog/>Blog</a>
<a title="About Me" href=/page/about-me/>About Me</a>
<a title=Accessibility href=/page/accessibility/>Accessibility</a>
<a title=Colophon href=/page/colophon/>Colophon</a></nav></header><article id=content><h1>A Right Set Up</h1><div class=meta><p><svg aria-label="Posted on"><use xlink:href="/symbol-defs.svg#icon-calendar"/></svg>Saturday, July 4, 2020</p><p><svg aria-label="Reading time"><use xlink:href="/symbol-defs.svg#icon-watch"/></svg>4 minutes</p></div><figure><blockquote>Give me six hours to chop down a tree and I will spend the first four sharpening the axe.</blockquote><figcaption>&mdash; Abraham Lincoln</figcaption></figure><p>I first became aware of the idea of provisioning a developer&rsquo;s own machine with GitHub&rsquo;s <a href=https://github.blog/2013-02-15-introducing-boxen/>Boxen</a> project. This was a <a href=https://puppet.com>Puppet</a>-based system that aimed to &ldquo;automate the pain out of your development environment&rdquo; and allow new starts to be contributing as soon as possible.</p><p>GitHub also host a guide on maintaining your <a href=https://dotfiles.github.io/>dotfiles</a>. Most developers are aware of the jarring experience of working on a strange machine without their custom command aliases and shortcuts available. Whether that is a brand new laptop or one that has had to be restored from a backup, removing the cognitive friction and working with the comfort of the familiar will always result in increased productivity.</p><p>Some would describe this kind of thing as being the very epitome of Parkinson&rsquo;s Law of Triviality &ndash; or <a href=https://effectiviology.com/bikeshedding-law-of-triviality/>bikeshedding</a> as it&rsquo;s sometimes known.</p><p>Over the years, I&rsquo;ve spent a fair amount of accumulated time in getting my development environment to a place where I can work efficiently while being simultaneously aesthetically pleasing &ndash; which, I understand, is all a subjective view. Others may have very well have different ideas and preferences. I&rsquo;ve taken inspiration from elsewhere; hopefully this post will prove to be useful to someone else in return.</p><p>The most important thing that I&rsquo;ve learnt is to <em>always</em> make configuration updates or install a new utility via code and then to commit those changes to version control immediately rather than doing things manually and promising myself that I&rsquo;ll remember to bring the git repo into line at some point later on.</p><h2 id=bootstrapping>Bootstrapping</h2><p>To initially set up a machine, I use <code>curl</code> to download a <code>bash</code> script from an easy-to-remember URL. This performs a system update then installs <a href=https://www.ansible.com>Ansible</a> and <code>git</code> via the package manager. I&rsquo;m using Ubuntu so for me that is <code>apt</code> but that could equally be <code>yum</code>, <code>dnf</code>, <a href=https://brew.sh>Homebrew</a> or <a href=https://chocolatey.org>Chocolatey</a> depending on your OS.</p><p>Once those two dependencies are ready, the script uses them to clone my setup repository and then runs the playbook in it to install and configure everything. This isn&rsquo;t quite an idempotent process due to the update and upgrade step but Ansible is declarative insofar as I have a known desired state which means that this bootstrap script can safely be rerun as and when required.</p><h2 id=shell>Shell</h2><p>I use vanilla <code>zsh</code> without a framework such as <a href=https://ohmyz.sh/>Oh My Zsh</a> or <a href=https://github.com/sorin-ionescu/prezto>Prezto</a>.</p><h2 id=theme>Theme</h2><p>My theme is a customised <a href=https://github.com/romkatv/powerlevel10k>Powerlevel 10k</a> - it&rsquo;s one better.</p><p>To match the editor pane in my IDE, I use a Powerline-patched variant of Source Code Pro that has additional glyphs &ndash; <a href=https://www.nerdfonts.com/font-downloads>Sauce Code Pro Nerd Font</a>.</p><p>My command line prompt includes the current AWS profile, VPN status, write permissions and directory path, <code>git</code> branch and status.</p><h2 id=plugins>Plugins</h2><p>While I don&rsquo;t use a framework, I do use <a href=https://getantibody.github.io/>Antibody</a> to manage shell plugins.</p><p>My current list of plugins is as follows:</p><ul><li>aperezdc/zsh-fzy</li><li>romkatv/powerlevel10k</li><li>supercrabtree/k</li><li>zsh-users/zsh-autosuggestions</li><li>zsh-users/zsh-completions</li><li>zsh-users/zsh-history-substring-search</li><li>zsh-users/zsh-syntax-highlighting</li></ul><h2 id=tab-completion>Tab completion</h2><p>I have tab completion enabled for <code>docker</code>, <nobr><code>docker-compose</code></nobr>, <code>git</code> and <nobr><code>aws-cli</code></nobr>. These let me automatically fill in subcommands, container and branch names without having to remember them or type them out in full.</p><p>Additionally, I&rsquo;ve written some custom completions for switching AWS profiles and listing EC2 instance ids in order to open connections using the AWS <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html>Session Manager</a>.</p><h2 id=aliases>Aliases</h2><p>To drastically reduce the amount of typing that we have to do, it&rsquo;s not uncommon for developers to have a collection of abbreviating aliases for their most frequently used commands.</p><p>I employ a simple initialism mnemonic to help me easily remember these shortcuts. For example:</p><ul><li><code><nobr>docker-compose</nobr> exec</code> becomes <code>dce</code></li><li><code>docker run --rm -it</code> is just <code>dr</code></li><li>and <code>git add --patch</code> simplifies to <code>gap</code>.</li></ul><h2 id=configuration-dotfiles>Configuration dotfiles</h2><p>My dotfiles are kept in a seperate repository as they&rsquo;re not dependent on a provisioning solution or a particular OS. Once cloned, I use <a href=https://www.gnu.org/software/stow/manual/stow.html><code>stow</code></a> to create symbolic links for the actual files in my user home directory.</p><p>I keep copies of my API keys and tokens in a file in this repo as well, encrypted using <a href=https://ssh-vault.com/>SSH Vault</a> and the keys that <a href=https://changelog.com/posts/github-exposes-public-ssh-keys-for-its-users>GitHub exposes</a> for everyone. My <code>~/.profile</code> then includes the decrypted version to make them available as environment variables &ndash; hence not being in <code>~/.zshrc</code> as they&rsquo;re not related to my choice of shell.</p><h2 id=utilities>Utilities</h2><p>There&rsquo;s a few things that I remove and a good deal more that I add &ndash; not least some of the <a href=/blog/2020-06-28-out-with-the-old/>new shiny</a> that I&rsquo;ve written about before. I&rsquo;m increasingly using a containerised toolchain but I&rsquo;ll still need to install some packages locally, such as <a href=https://direnv.net/><code>direnv</code></a>, <a href=https://linrunner.de/tlp/><code>tlp</code></a>, <a href=https://github.com/tmux/tmux/wiki><code>tmux</code></a> and container tools like <a href=https://github.com/containers/skopeo>Skopeo</a>.</p></article><nav><a href=https://nevstokes.com/blog/2020-06-28-out-with-the-old/ title="Out With the Old">&#171; Previous Post</a>
<a href=https://nevstokes.com/blog/2020-07-21-herring-road/ title="The Herring Road">Next Post &#187;</a></nav><footer><ul class=container aria-label="Social Links"><li><a href=https://twitter.com/nevstokes title=Twitter target=_blank rel="noopener noreferrer"><svg><use xlink:href="/symbol-defs.svg#icon-twitter"/></svg><span>My Twitter Feed</span></a></li><li><a href=https://keybase.io/nevstokes title=Keybase target=_blank rel="noopener noreferrer"><svg><use xlink:href="/symbol-defs.svg#icon-keybase"/></svg><span>My Keybase Identity</span></a></li><li><a href=https://github.com/nevstokes title=GitHub target=_blank rel="noopener noreferrer"><svg><use xlink:href="/symbol-defs.svg#icon-github"/></svg><span>My GitHub Repositories</span></a></li><li><a href=https://linkedin.com/in/nevstokes title=LinkedIn target=_blank rel="noopener noreferrer"><svg><use xlink:href="/symbol-defs.svg#icon-linkedin"/></svg><span>My LinkedIn Profile</span></a></li><li><a href=https://stackoverflow.com/users/224639/nev-stokes title=StackOverflow target=_blank rel="noopener noreferrer"><svg><use xlink:href="/symbol-defs.svg#icon-stackoverflow"/></svg><span>My StackOverflow Activity</span></a></li><li><a href=https://www.strava.com/athletes/nevstokes title=Strava target=_blank rel="noopener noreferrer"><svg><use xlink:href="/symbol-defs.svg#icon-strava"/></svg><span>My Strava Activities</span></a></li><li><a href=https://nevstokes.com/index.xml title=RSS target=_blank rel="noopener noreferrer"><svg><use xlink:href="/symbol-defs.svg#icon-rss"/></svg><span>This Blog's RSS Feed</span></a></li></ul></footer></main></html>